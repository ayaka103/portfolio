# Code Review: パフォーマンスチェックリスト

パフォーマンスの問題・改善点に関するチェック項目。

## チェック項目

### 1. リソースの重複ロード

- [ ] 同じフォント・ライブラリが複数箇所でロードされていないか
- [ ] CSS/JS の重複インポートがないか
- [ ] 画像が複数回ダウンロードされていないか

**実例（ポートフォリオレビュー）**: `Noto_Serif_JP` フォントが `app/layout.tsx` と `app/portfolio/layout.tsx` の両方で独立してインスタンス化されていた。ルートレイアウトで一度だけ定義すれば十分。

### 2. 不要な再計算

- [ ] レンダリングごとに再計算される不要な処理がないか
- [ ] 静的な値がコンポーネント内で毎回計算されていないか
- [ ] `useMemo` / `useCallback` が必要な箇所で使われているか

**実例（ポートフォリオレビュー）**: カテゴリフィルターのカウントが `categories.map` 内で毎レンダリング `projects.filter().length` を実行していた。プロジェクト数が不変なら事前計算で十分。

### 3. 画像最適化

- [ ] `next/image` の `sizes` 属性が適切に設定されているか
- [ ] 画像のフォーマットが最適か（WebP/AVIF への変換）
- [ ] 画面外の画像に `loading="lazy"` が設定されているか
- [ ] `fill` レイアウト使用時に親要素に `position: relative` があるか

### 4. バンドルサイズ

- [ ] 不要な依存パッケージがバンドルに含まれていないか
- [ ] Tree-shaking が有効に機能しているか
- [ ] dynamic import が適切に使われているか（大きなコンポーネント）

### 5. CSS パフォーマンス

- [ ] グローバルスタイルが不要に多くないか
- [ ] アニメーションが `transform` / `opacity` を使用しているか（レイアウトスラッシュ回避）
- [ ] 未使用の CSS クラスが残っていないか
